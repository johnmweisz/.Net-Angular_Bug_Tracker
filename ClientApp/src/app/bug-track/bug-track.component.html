<div *ngIf="!bug && isPublic || !bug && isAuthorized || !bug && isAdmin" class="d-flex justify-content-center m-5">
  <div class="spinner-border" role="status">
    <span class="sr-only">Loading...</span>
  </div>
</div>
<div *ngIf="project && !isAuthorized && !isAdmin">
  <p>This project is set to private and you are not a contributor or admin.</p>
</div>
<div *ngIf="bug">
  <h2>{{ bug['Subject'] }}</h2>
  <p>{{ bug.Creator['FirstName'] }} {{ bug.Creator['LastName'] }}</p>
  <p>{{ bug['Message'] }}</p>
  <p>{{ bug['Priority'] }}</p>
  <p>{{ bug['Status'] }}</p>
  <p>{{ bug['DueDate'] | date}}</p>
  <div *ngIf="updates">
    <table class="table">
      <thead>
        <tr>
          <th scope="col">Status</th>
          <th scope="col">Message</th>
          <th scope="col">Updated</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let update of updates">
          <th scope="row">{{ update['Status'] }}</th>
          <td>{{ update['Message'] }}</td>
          <td>{{ update['CreatedAt'] | date }}</td>
        </tr>
      </tbody>
    </table>
    <form #valForm='ngForm' (ngSubmit)="add()">
      <div class="form-group">
        <label for="Status">Status</label>
        <select class="form-control" type="text" name="Status" required #valStatus='ngModel' [(ngModel)]="Status" placeholder="Status">
          <option value="New">New</option>
          <option value="Open">Open</option>
          <option value="Assigned">Assigned</option>
          <option value="Testing">Testing</option>
          <option value="Verified">Verified</option>
          <option value="Closed">Closed</option>
        </select>
        <div class="alert alert-danger" *ngIf="errors?.Status">
            <p>{{ errors.Status }}</p>
        </div>
        <div class="alert alert-danger" *ngIf="valStatus.errors?.required && (valStatus.dirty || valStatus.touched)">
          <p>Required</p>
        </div>
      </div>
      <div class="form-group">
        <label for="Message">Message</label>
        <input class="form-control" type="text" name="Message" required #valMessage='ngModel' [(ngModel)]="Message" placeholder="Message">
        <div class="alert alert-danger" *ngIf="errors?.Message">
            <p>{{ errors.Message }}</p>
        </div>
        <div class="alert alert-danger" *ngIf="valMessage.errors?.required && (valMessage.dirty || valMessage.touched)">
          <p>Required</p>
        </div>
      </div>
      <div>
          <button class="btn btn-warning" *ngIf="!valForm.valid" type="button">Submit</button>
          <button class="btn btn-primary" *ngIf="valForm.valid" type="submit">Submit</button>
      </div>
  </form>
  </div>
</div>
